---
title: Geek 全栈工程师修炼指南 学习笔记
date: 2019-09-17 10:26:57
tags:
- 全栈
categories:
- 全栈
- 学习笔记
---
#### 摘要
这是目标
<!--more-->
#### 第1讲 HTTP协议的演化
1. HTTP协议的演化进程及各个版本的核心内容？
    - Http/0.9(1991)
        - 确定了客户端、服务端这种基本结构
        - 使用域名/IP加端口号来确定目标地址的方式
        - 换行回车作为基本的分隔符
        - 不支持请求正文，不支持GET以外的方法，不支持头部，没有版本号的显式指定，整个请求只有一行(The One-line Protocol)：`GET /target.html`
    - Http/1.0(1996)
        - 引入了返回码、引入了header、引入了多字符集、支持多行请求
        - 支持GET/HEAD/POST方法
        - 每一组请求和响应的交互，都要完成一次TCP的连接和关闭操作
    - Http/1.1(1999)
        - Connection:Keep-Alive Http的长连接，指的是打开一次TCP连接，可以被连续几次报文传输重用，中间几次的TCP连接开始和结束的握手都省掉了。
        - 支持分块传输编码，提高HTTP交互的灵活性
        - 对指定客户端缓存策略的支持，对content negotiation的支持(通过客户端请求的以Accept开头的头部来告知服务端它能接受的内容类型)
    - Http/2(2015)
        - ALPN机制，允许客户端来选择使用的HTTP版本
        - HTTP头的压缩，在2.0以前，HTTP正文支持多种方式的压缩，但是HTTP头部却不能
        - 多路复用，允许客户端同时在一个连接中同时传输多组请求响应的方法
        - 服务端的push机制，比如客户端获取一个网页的时候，下载网页，分析网页内容，得知还需要一个js文件和一个css文件，于是再分别去下载，而服务端的push机制可以提前就把这些资源推送到客户端，而不需要客户端来索取，从而节省网页加载总时间。
    - Http/3
        -  将承载协议从TCP转移到基于UDP的QUIC

2. 推荐基础学习[HTTP](https://developer.mozilla.org/zh-CN/docs/Web/HTTP)
    - HTTP是一种客户端-服务端的通讯协议，
    - 要展现一个网页，浏览器首先发送一个请求来获取页面的HTML文档，再解析文档中的资源信息发送其他请求，获取可执行脚本或CSS样式来进行页面布局渲染，以及一些其它页面资源（如图片和视频等）。然后，浏览器将这些资源整合到一起，展现出一个完整的文档，也就是网页。浏览器执行的脚本可以在之后的阶段获取更多资源，并相应地更新网页。
    - 代理主要有以下几种作用：
        - 缓存(可以使公开的，也可以是私有的，如浏览器的缓存)
        - 过滤(如反病毒扫描，家长控制)
        - 负载均衡(让多个服务器服务不同的请求)
        - 认证(对不同资源进行权限管理)
        - 日志记录(允许存储历史信息)
    - HTTP的基本性质
        - 简单
        - 可扩展
        - 无状态、有会话的
        - 底层通过TCP连接实现，谷歌研发以UDP为基础，能提供更可靠更搞笑的传输协议QUIC
    - HTTP能控制什么？
        - 缓存
        - 开放同源限制：防止网络窃听和其他隐私泄露，浏览器强制对web网站做了分割限制。只有来自相同来源的网页才能获取网站的全部信息，HTTP可以通过修改头部来开放这样的限制，因此web文档可以使由不同域下的信息拼接成的。
        - 认证：Authenticate
        - 代理和隧道
        - 会话
    - 客户端与服务端交互的过程：
        - 打开一个TCP连接
        - 发送一个HTTP报文
        - 读取服务端返回的报文信息
        - 关闭连接，或者为后续请求重用连接
    - HTTP报文
        - HTTP/1.1及以前的报文都是语义可读的，HTTP/2中，这些报文被嵌入到一个新的二进制结构，帧。帧可以实现报文头部的压缩和复用
        - 请求报文包括：Method + Path + Version of the protocol + headers
        - 响应报文包括：Version of the protocol + Status code + Status message + Headers  
    - HTTP缓存控制
        - cache-control头：
            - no-store：禁止进行缓存
            - no-cache：强制确认缓存
            - private：私有缓存
            - public：公共缓存
            - max-age=31536000：缓存过期时间
            - must-revalidate：缓存验证确认
    - HTTP访问控制(CORS)
        - 使用额外的HTTP头来告诉浏览器，让运行在一个origin上的Web引用被准许访问来自不同源服务器上的指定的资源。当一个资源从与改资源本身缩在的服务器不同的域、协议或端口请求一个资源的时候，资源会发起一个跨域HTTP请求。

3. [推荐OSI 7层模型学习](https://www.networkworld.com/article/3239677/the-osi-model-explained-how-to-understand-and-remember-the-7-layer-network-model.html)
    - Application(应用层)
        - 与其他计算机进行通讯的一个应用，对应应用程序的通信服务
    - Presentation(表示层)
        - 定义数据格式及加密
    - Session(会话层)
        - 定义了如何开始、控制和结束一个会话，包括对多个双向消息的控制和管理，以便在只完成连续消息的一部分时可以通知应用，从而使表示层看到的数据是连续的
    - Transport(传输层)
        - 是否选择差错控制协议还是无差错恢复协议，及在同一主机上对不同应用的数据流的输入进行复用，对收到的顺序不对的数据包的重新排序功能
    - Network(网络层)
        - 对端到端的包传输进行定义，定义了能够标识所有结点的逻辑地址，还定义了路由实现的方式和学习的方式
    - Data link(数据链路层)
        - 定义了再耽搁链路上如何传输数据
    - Physical(物理层)
        - 物理层的规范是有关传输介质的特性，这些规范通常也参考了其他组织制定的标准。

#### 第2讲 HTTPS
1. 客户端A发送一个数据给服务端B，HTTP协议存在的隐患：
    - Interception(拦截)，传输的消息可以被中间人C捕获，并泄露数据
    - Spoofing(伪装),A和B都可能被C冒名顶替，因此消息传输编程C发送到B，或者A发送到C
    - Falsification(篡改)，C改写了传输的消息，因此B受到了一条被篡改的消息而不知情
    - Repudiation(否认)，A或者B不安好心，A把消息成功发送了，但之后A否认，或者B其实收到了消息，但是也否认它收到过。

2. HTTPS = HTTP + SSL/TLS
    - SSL和TLS是具备父子衍生关系的同一类安全协议

3. 对称加密和非对称加密分别是什么？
    - 对称加密指同一个秘钥进行加密解密
    - 非对称加密指公钥进行加密，私钥进行解密

4. TLS连接建立原理？
    - 连接过程：
    
    ```sequence
    participant 浏览器
    participant 服务器
    浏览器->>服务器:随机数A\n支持的加密方法集
    服务器-->>浏览器:随机数B\n选定的加密方法
    服务器-->>浏览器:包含公钥的证书
    Note left of 浏览器:验证整数\n生成随机数C\nA+B+C->会话密钥
    浏览器->>服务器:公钥加密的随机数C\n加密方法变更通知\n用于快速验证的加密串
    Note right of 服务器:私钥解密得到随机数C\nA+B+C->会话密钥
    服务器-->>浏览器:加密方法变更通知\n用于快速验证的加密串
    Note right of 浏览器:握手完成，以下部分通信全部使用会话密钥加密
    ```
    

