---
title: 图解HTTP 读书笔记
date: 2018-05-20 13:45:40
tags:
- 计算机网络
categories:
- 计算机网络
- 学习笔记
---
#### 摘要
太通俗

#### 第一章 了解Web及网络基础
1. 网络分层和各层的作用？
    - 应用层：决定了向用户提供应用服务时通信的活动
        - HTTP协议
    - 传输层：对上层应用层，提供处于网络连接中的两台计算机之间的数据传输
        - TCP协议(传输控制协议)、UDP协议(用户数据报协议)
    - 网络层：用来处理在网络上流动的数据包。
    - 链路层：用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC，及光纤等物理可见部分。硬件上的范畴均在链路层的作用范围之内。
    - 物理层：不属于TCP/IP协议族里面的。

2. HTTP请求流程？
    - 发送端，应用层发送HTTP数据，传输层在这个基础上加上TCP首部，网络层加上IP首部，链路层加上以太网首部
    - 接收端，接收到数据包后，链路层拿下以太网首部，网络层拿下IP首部，传输层拿下TCP首部，应用层拿到HTTP数据。

3. 什么是IP协议
    - 位于网络层
    - 负责传输，把各种数据包传送给对方

4. 什么是ARP协议？
    - 用以解析地址的协议，根据通信方的IP地址，就可以反差出对应的MAC地址。

5. 什么是TCP协议？三次握手过程是怎样的？
    - 传输层
    - 提供可靠的字节流服务(为了方便传输，将大块数据分割成以报文段为单位的数据包进行管理，而可靠的传输服务是指，能够把数据准确可靠得传给对方。)
    - 三次握手
        - 发送端首先发送一个带SYN标志的数据包给对方
        - 接收端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认信息
        - 发送端再回传一个ACK标志的数据包，代表握手结束。

6. 什么是DNS服务？
    - 和HTTP协议一样，位于应用层
    - 提供域名到IP地址之间的解析服务

7. HTTP请求流程中，各协议起到的作用
    - DNS服务：通过域名解析到对应的IP地址
    - HTTP协议：生成针对目标服务器的HTTP请求报文
    - TCP协议：为了方便通信，将HTTP请求报文分割成报文段，把每个报文段可靠的传给对方
    - IP协议：搜索对方的地址，一边中转，一边传送
    - (接收端)TCP协议：从对方那里接收到报文段，按顺序将到达的报文段重组为请求报文
    - (接收端)HTTP协议：对Web请求的内容的处理。

#### 第二章 简单的HTTP协议
1. 客户端发给HTTP服务器端的请求报文内容包括哪些？
    - 由请求方法、请求URI、协议版本、可选的请求首部字段和内容实体构成。
    - 如`GET /index.htm HTTP/1.1 Host:xxx`：
        - `GET`表示请求服访问服务器的类型，称为method
        - `/index.htm`表示请求访问的资源对象，也叫请求URI。
        - `HTTP/1.1`表示HTTP的版本号
2. 服务端返回给客户端的响应报文包括哪些内容？
    - 由协议版本、状态码、泳衣解释状态码的原因短语、可选的响应首部字段以及实体主题构成
    - 如`HTTP/1.1 200 OK Data:xxx Content-Type:xxx`
        - `HTTP/1.1`表示服务器对应的HTTP版本
        - `2002 OK`表示请求的处理结果的状态码和原因短语
        - `Date:xxx`显示了响应的日期时间，是首部字段内的一个属性

3. HTTP协议有什么特点？
    - HTTP是一种不保存状态，即无状态协议。HTTP协议自身不对请求和响应之间的通信状态进行保存，也就是说，在HTTP这个级别，协议对于发送过的请求或响应都不做持久化处理。
    - 为了实现期望的保持状态的功能，引入了Cookie技术，有了Cookie再用HTTP协议通信，就可以管理状态了。

4. HTTP/1.1中可以使用的method都有哪些？
    - GET：获取资源
    - POST：传输实体主体
    - PUT：传输文件
    - HEAD：获取报文首部
    - DELETE：删除文件
    - OPTIONS：询问支持的方法
    - TRACE：追踪路径
    - CONNECT：要求用隧道协议连接代理

5. 一次TCP连接可以进行几次HTTP请求？
    - 以前的版本一次请求建立连接后，请求响应完会断开连接
    - HTTP/1.1出现了持久连接，HTTP keep-alive，持久连接减少了TCP连接的重复建立和断开所造成的额外开销，减轻服务器的负载；同时减少了开销的时间，使HTTP请求和响应能够更早的结束。
    - HTTP/1.1中默认都是持久连接。

6. 什么是管线化？有什么作用？
    - 以前发送请求后续等待并受到响应后才能发送下一个请求。管线化技术出现后，不用等待响应也可以直接发送下一个请求

7. 什么是Cookie？
    - HTTP是无状态协议，不对之前发生过的请求和响应状态进行管理。如果要求登录认证的web页面本身无法进行状态的管理，那么每次跳转新页面就要再次登录，或者要在每次请求报文中附加参数来管理登录状态。
        - 优点是，可以减少服务器的CPU及内存资源的消耗；协议简单，方便应用在各种场景里。
    - 为了解决这个矛盾，引入了Cookie，通过在请求和响应报文中写入Cookie信息来控制客户端的状态。
    - Cookie会根据从服务器端发送的响应报文中一个Set-Cookie的首部字段信息，通知客户端保存Cookie。下次客户端再发送请求的时候，会自动在请求报文中加入Cookie值后发送出去。服务器拿到Cookie后，会去检查是从哪个客户端发来的连接请求，然后得到之前的状态信息。 

#### 第三章 HTTP报文内的HTTP信息
1. HTTP报文都包括哪些内容？
    - 分为请求报文和响应报文
    - 请求行：包含用于请求的方法，请求URI和HTTP版本
    - 状态行：包含表明响应结果的状态码，原因短语和HTTP版本
    - 首部字段：包含请求和响应的各种条件和属性的各类首部
        - 通用首部、请求首部、响应首部和实体首部等
    - 其他：包含HTTP的RFC里未定义的首部

2. 报文和实体是什么？两者有什么差异？
    - 报文是HTTP通信的基本单位，由8位组字节流组成，通过HTTP通信传输
    - 实体是作为请求或响应的有效载荷数据被传输，其内容由实体首部和实体主体组成
    - 通常，报文主题等于实体主题。只有当传输中进行编码操作的时候，实体主题的内容发生变化，才导致它和报文主题产生差异。

3. 什么是HTTP协议中的内容编码？
    - 指明应用在实体内容上的编码格式，并保持实体信息原样压缩。客户端接收后解码

4. 什么是分块传输编码？
    - 在传输大容量数据的时候，通过把数据分割成多块，能够让浏览器逐步显示页面。这种把实体主体分块的功能成为分块传输编码
    - HTTP/1.1中存在一种称为传输编码的机制，它可以在通信的时候按某种编码方式传输，但只定义作用于分块传输编码中。

5. 如何发送多种数据的多部分对象集合？
    - Content_type：multipart/form-data

6. 获取部分内容的范围请求？
    - Range Request:制定下载的实体范围

#### 第四章 返回结果的HTTP状态码
1. 响应的状态码的类别？
    - 1XX
        - Informational(信息性状态码)：接收的请求正在处理
    - 2XX
        - Success(成功状态码)：请求正常处理完毕
    - 3XX
        - Redirection(重定向状态码)：需要进行附加操作以完成请求
    - 4XX
        - Client Error(客户端错误状态码)：服务器无法处理请求
    - 5XX
        - Server Error(服务器错误状态码)：服务器处理请求出错

2. 2XX成功
    - 200 OK
        - 表示从客户端发来的请求在服务器端被正常处理了。
    - 204 No Content
        - 服务器接收的请求已成功处理，但在返回的响应报文中不含实体的主体部分。
    - 206 Partial Content
        - 表示客户端进行了范围请求，而服务器成功执行了这部分的GET请求。响应报文中包含由Content-Range指定范围的实体内容

3. 3XX重定向
    - 301 Moved Permanently
        - 永久性重定向。表示请求的资源已被分配了新的URI，以后赢使用资源现在所指的URI
    - 302 Found
        - 临时性重定向。表示请求的资源已被分配的新的URI，希望用户能使用新的URI访问。
    - 303 See Other
        - 由于请求对应的资源存在着另一个URI，应使用GET方法形象获取请求的资源
    - 304 Not Modified
        - 表示客户端发送附带条件的请求时，服务器端允许请求访问资源，但因发生请求未满足条件的情况后，直接返回304。304返回的时候，不包含任何响应的主体部分，和重定向没关系
    - 307 Temporary Redirect
        - 临时重定向，和302类似，302标准禁止POST变换为GET，但实际使用的时候大家并不遵守。307会遵照浏览器标准，不会从POST编程GET。

4. 4XX客户端错误
    - 400 Bad Request
        - 请求报文中存在语法错误。需修改请求的内容后再次发送请求
    - 401 Unauthorized
        - 发送的请求需要有通过HTTP认证(BASIC认证、DIGEST认证)的认证信息 
    - 403 Forbidden
        - 对请求资源的访问被服务器拒绝了。
    - 404 Not Found
        - 服务器上无法找到请求的资源。

5. 5XX服务器错误 
    - 500 Internal Server Error
        - 服务器端在执行请求的时候发生了错误
    - 503 Service Unavailable
        - 服务器暂时处于超负载或正在进行停机维护，现在无法处理请求。 

#### 第五章 与HTTP协作的Web服务器
1. 用单台虚拟主机实现多个域名
    - 物理层面只有一台服务器，使用虚拟主机的功能，可以假想已具有多台服务器。
    - 两个域名同时部署在同一个服务器上，使用DNS服务解析域名后，两者的访问IP地址相同。
    - 在相同的IP地址下，由于虚拟主机可以寄存多个不同主机名和域名的WEB网站，因此在发送HTTP请求的时候，必须在HOST首部内完整指定主机名或域名的URI

2. 什么是代理服务器？
    - 代理服务器的基本行为就是接受客户端发送的请求后转发给其他服务器。
    - 代理不改变URI，会直接发送给前方持有资源的目标服务器。
    - 可级联多台代理服务器，每次通过代理服务器转发请求或响应的时候，会追加写入Via首部信息

3. 代理的分类
    - 是否使用缓存：缓存代理会预先将资源的副本保存在代理服务器上，当代理再次接收到对相同资源的请求时，就可以不从源服务器那里获取资源，而是将之前缓存的资源作为相应返回。
    - 是否会修改报文：不对报文做任何加工的代理类型成为透明代理，反之为非透明代理

#### 第六章 HTTP首部
1. HTTP首部字段类型？
    - 通用首部字段
    - 请求首部字段
    - 响应首部字段
    - 实体首部字段

2. 通用首部字段
    - Cache-Control：控制缓存行为
    - Connection：逐跳首部、连接的管理
    - Date：创建报文的日期时间
    - Pragma：报文指令  
    - Trailer：报文末端的首部一览
    - Transfer-Encoding：指定报文主体的编码方式
    - Upgrade：升级为其他协议
    - Via：代理服务器的相关信息
    - Warning：错误统治者

3. 请求首部字段：
    - Accept：用户代理可处理的媒体类型
    - Accept-Charset：优先的字符集
    - Accept-Encoding：优先的内容编码
    - Accept-Language：优先的语言
    - Authorization：Web认证信息
    - Expect：期待服务器的特定行为
    - From：用户的电子邮箱地址
    - Host：请求资源所在的服务器
    - If-Match：比较实体标记
    - If-Modified-Since：比较资源的更新时机
    - If-None-Match：比较实体标记
    - If-Range：资源未更新时发送实体Byte的范围请求
    - If-Unmodified-Since：比较资源的更新时机
    - Max-Forwards：最大传输逐跳数
    - Proxy-Authorization：代理服务器要求客户端的认证信息
    - Range：实体的字节范围要求
    - Referer：对请求中URI的原始获取方
    - TE：传输编码的优先级
    - User-Agent：HTTP客户端程序的信息

4. 响应首部字段：
    - Accept-Ranges：是否接受字节范围请求
    - Age：推算资源创建经过时间
    - ETag：资源的匹配信息
    - Location：令客户端重定向至指定URI
    - Proxy-Authenticate：代理服务器对客户端的认证信息
    - Retry-After：对再次发起请求的时机要求
    - Server：HTTP服务器的安装信息
    - Vary：代理服务器缓存的管理信息
    - WWW-Authenticate：服务器对客户端的认证信息

5. 实体首部字段：
    - Allow：资源可支持的HTTP方法
    - Content-Encoding：实体主体使用的编码方式
    - Content-Language：实体主体的自然语言
    - Content-Length：实体主体的额大笑
    - Content-Location：替代对应资源的URI
    - Content-MD5：实体主体的报文摘要
    - Content-Range：实体主体的位置范围
    - Content-Type：实体主图的媒体类型
    - Expires：实体主体过期的日期时间
    - Last-Modified：资源的最后修改日期时间

6. 首部字段类型
    - 端到端首部：会转发给请求/响应对应的最终接受目标，且必须保存在由缓存生成的响应中，另外规定它必须被转发。
    - 逐跳首部：只对单词转发有效，会因通过缓存或代理而不再转发
